@tailwind base;
@tailwind components;
@tailwind utilities;

/* ───────────────── Custom Properties (Light / Dark) ─────────────────────── */

:root {
  --background: 255 255 255;
  --foreground: 15 23 42;
  --card: 255 255 255;
  --card-foreground: 15 23 42;
  --muted: 241 245 249;
  --muted-foreground: 100 116 139;
  --border: 226 232 240;
  --ring: 199 28 105;
  --radius: 0.75rem;
  /* Brand colours — single source of truth for raw CSS usage */
  --color-primary: #c71c69;
  --color-secondary: #222222;
  /* Hero section — light theme (darker at top so logo with pink stands out) */
  --hero-bg: linear-gradient(165deg, #2d0314 0%, #480521 18%, #77133f 40%, #480521 65%, #1a020c 100%);
  --hero-spotlight: radial-gradient(ellipse 80% 70% at 30% 50%, rgba(231, 62, 133, 0.35) 0%, transparent 50%);
  /* Page hero wave fills with content area background for seamless transition */
  --page-hero-wave: #ffffff;
}

.dark {
  --background: 15 23 42;
  --foreground: 241 245 249;
  --card: 30 41 59;
  --card-foreground: 241 245 249;
  --muted: 51 65 85;
  --muted-foreground: 148 163 184;
  --border: 51 65 85;
  --ring: 241 112 168;
  /* Hero section — dark theme (same magenta/burgundy family, deeper) */
  --hero-bg: linear-gradient(165deg, #2d0314 0%, #1a020c 25%, #0f0108 50%, #1a020c 75%, #2d0314 100%);
  --hero-spotlight: radial-gradient(ellipse 80% 70% at 30% 50%, rgba(199, 28, 105, 0.25) 0%, rgba(126, 15, 63, 0.12) 40%, transparent 70%);
  --page-hero-wave: #0f172a; /* slate-900 — matches body dark bg */
}

/* Hero section — RTL: mirror gradient and spotlight so layout feels correct in Arabic */
[dir="rtl"] {
  --hero-bg: linear-gradient(15deg, #2d0314 0%, #480521 18%, #77133f 40%, #480521 65%, #1a020c 100%);
  --hero-spotlight: radial-gradient(ellipse 80% 70% at 70% 50%, rgba(231, 62, 133, 0.35) 0%, transparent 50%);
}
[dir="rtl"].dark {
  --hero-bg: linear-gradient(15deg, #2d0314 0%, #1a020c 25%, #0f0108 50%, #1a020c 75%, #2d0314 100%);
  --hero-spotlight: radial-gradient(ellipse 80% 70% at 70% 50%, rgba(199, 28, 105, 0.25) 0%, rgba(126, 15, 63, 0.12) 40%, transparent 70%);
}

/* ───────────────── Base Styles ──────────────────────────────────────────── */

@layer base {
  * {
    @apply border-slate-200 dark:border-slate-700;
  }

  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100;
    @apply transition-colors duration-300;
  }

  /* Arabic font override — body and all text use Arabic font in RTL */
  [dir="rtl"] body,
  [dir="rtl"] {
    font-family: var(--font-arabic), var(--font-sans), system-ui, sans-serif;
    font-feature-settings: "ss01";
  }

  /* Selection color */
  ::selection {
    @apply bg-primary-500/20 text-primary-900 dark:text-primary-100;
  }

  /* Focus styles */
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-primary-500;
  }
}

/* ───────────────── Component Utilities ──────────────────────────────────── */

@layer components {
  /* Glass morphism */
  .glass {
    @apply backdrop-blur-xl bg-white/80 dark:bg-slate-900/80;
    @apply border border-white/20 dark:border-slate-700/30;
  }

  .glass-strong {
    @apply backdrop-blur-2xl bg-white/90 dark:bg-slate-900/90;
    @apply border-0;
    @apply shadow-lg shadow-black/5 dark:shadow-black/20;
  }

  /* Gradient text */
  .gradient-text {
    @apply bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent;
  }

  .gradient-text-accent {
    @apply bg-gradient-to-r from-accent-500 to-accent-400 bg-clip-text text-transparent;
  }

  /* Section heading — display font for impact */
  .section-heading {
    @apply font-display text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight;
  }

  .section-subheading {
    @apply text-lg sm:text-xl text-slate-600 dark:text-slate-400 max-w-2xl;
  }

  /* Display headline for hero and key titles */
  .display-headline {
    @apply font-display font-extrabold tracking-tight;
    letter-spacing: -0.02em;
  }

  /* RTL: use Arabic font for headlines/display so Arabic isn't squashed (Sora has no Arabic glyphs) */
  [dir="rtl"] .display-headline,
  [dir="rtl"] .section-heading,
  [dir="rtl"] .font-display {
    font-family: var(--font-arabic), var(--font-sans), system-ui, sans-serif;
    letter-spacing: normal;
  }

  /* Extra line spacing for display headlines in RTL (Arabic) to avoid overlapping ascenders/descenders */
  [dir="rtl"] .display-headline {
    line-height: 1.3;
  }

  /* Subtle grain overlay for depth (optional use) */
  .grain-overlay {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
  }

  /* Container with max-width */
  .container-custom {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Card styles */
  .card {
    @apply bg-white dark:bg-slate-800 rounded-2xl;
    @apply border border-slate-100 dark:border-slate-700;
    @apply shadow-sm hover:shadow-lg;
    @apply transition-all duration-300;
  }

  .card-elevated {
    @apply card shadow-lg shadow-slate-200/80 dark:shadow-black/30;
    @apply hover:shadow-xl hover:shadow-slate-300/50 dark:hover:shadow-black/40;
    @apply hover:-translate-y-1;
  }

  /* Button base styles */
  .btn {
    @apply inline-flex items-center justify-center gap-2;
    @apply font-semibold rounded-xl px-6 py-3;
    @apply transition-all duration-300;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
  }

  .btn-primary {
    @apply btn bg-primary-600 text-white;
    @apply hover:bg-primary-700 active:bg-primary-800;
    @apply focus-visible:ring-primary-500;
    @apply shadow-lg shadow-primary-600/25 hover:shadow-xl hover:shadow-primary-600/30;
  }

  .btn-accent {
    @apply btn bg-accent-500 text-white;
    @apply border-2 border-accent-600/80 dark:border-accent-400/60;
    @apply hover:bg-accent-600 active:bg-accent-700;
    @apply focus-visible:ring-accent-500;
    @apply shadow-lg shadow-accent-500/25 hover:shadow-xl hover:shadow-accent-500/30;
  }

  .btn-outline {
    @apply btn border-2 border-primary-600 text-primary-600;
    @apply hover:bg-primary-600 hover:text-white;
    @apply dark:border-primary-400 dark:text-primary-400;
    @apply dark:hover:bg-primary-400 dark:hover:text-slate-900;
    @apply focus-visible:ring-primary-500;
  }

  .btn-ghost {
    @apply btn text-slate-700 dark:text-slate-300;
    @apply hover:bg-slate-100 dark:hover:bg-slate-800;
    @apply focus-visible:ring-slate-500;
  }

  .btn-white {
    @apply btn bg-white text-primary-700;
    @apply hover:bg-slate-50;
    @apply shadow-lg shadow-black/10;
  }

  /* Input styles */
  .input {
    @apply w-full rounded-xl px-4 py-3;
    @apply bg-white dark:bg-slate-800;
    @apply border border-slate-200 dark:border-slate-700;
    @apply text-slate-900 dark:text-slate-100;
    @apply placeholder:text-slate-400 dark:placeholder:text-slate-500;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent;
    @apply transition-all duration-200;
  }

  .textarea {
    @apply input resize-none;
    min-height: 120px;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold;
  }

  .badge-primary {
    @apply badge bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-300;
  }

  .badge-accent {
    @apply badge bg-accent-100 text-accent-500 dark:bg-accent-500/30 dark:text-accent-100;
  }

  /* Page hero header */
  .page-hero {
    @apply relative min-h-[40vh] flex items-center justify-center;
    @apply bg-gradient-to-br from-primary-600 via-primary-700 to-primary-900;
    @apply dark:from-primary-900 dark:via-slate-900 dark:to-slate-900;
    @apply overflow-hidden;
  }

  .page-hero::before {
    content: "";
    @apply absolute inset-0;
    background: radial-gradient(
        ellipse at 20% 50%,
        rgba(255, 255, 255, 0.1) 0%,
        transparent 50%
      ),
      radial-gradient(
        ellipse at 80% 50%,
        color-mix(in srgb, var(--color-primary) 10%, transparent) 0%,
        transparent 50%
      );
  }

  .page-hero-content {
    @apply relative z-10 text-center text-white py-24 px-4;
  }

  /* PageHero wave fill — matches content area in light/dark for seamless transition */
  .page-hero-wave-fill {
    color: var(--page-hero-wave);
  }

  /* Skeleton loader */
  .skeleton {
    @apply bg-slate-200 dark:bg-slate-700 rounded-lg animate-pulse;
  }

  /* Divider */
  .divider {
    @apply w-20 h-1 bg-gradient-to-r from-primary-500 to-accent-500 rounded-full mx-auto;
  }

  /* Blog detail body — clean prose and prevent CMS content from feeling messy */
  .blog-body {
    @apply text-slate-700 dark:text-slate-300;
  }
  .blog-body > * + * {
    @apply mt-6;
  }
  .blog-body h2 {
    @apply text-2xl font-bold text-slate-900 dark:text-white mt-10 mb-4 pb-2 border-b border-slate-200 dark:border-slate-700;
  }
  .blog-body h3 {
    @apply text-xl font-bold text-slate-900 dark:text-white mt-8 mb-3;
  }
  .blog-body img {
    @apply max-w-full h-auto rounded-xl shadow-md my-6 block;
  }
  .blog-body p {
    @apply leading-relaxed;
  }
  .blog-body ul,
  .blog-body ol {
    @apply my-4 pl-6 space-y-1;
  }
  .blog-body figure {
    @apply my-8;
  }
  .blog-body figure img {
    @apply my-2;
  }
  .blog-body table {
    @apply w-full border-collapse my-6 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700;
  }
  .blog-body th,
  .blog-body td {
    @apply border border-slate-200 dark:border-slate-700 px-4 py-3 text-left;
  }
  .blog-body th {
    @apply bg-slate-100 dark:bg-slate-800 font-semibold text-slate-900 dark:text-white;
  }
}

/* ───────────────── Utility Overrides ────────────────────────────────────── */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Hide scrollbar but keep scrolling */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Animated gradient background */
  .animated-gradient {
    background-size: 200% 200%;
    animation: gradientShift 8s ease infinite;
  }

  @keyframes gradientShift {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  /* Page hero: floating particles */
  .page-hero-particles {
    animation: particlesFloat 20s ease-in-out infinite;
  }

  @keyframes particlesFloat {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    25% {
      transform: translate(2%, -1.5%) scale(1.02);
    }
    50% {
      transform: translate(-1.5%, 1%) scale(0.98);
    }
    75% {
      transform: translate(1%, 2%) scale(1.01);
    }
  }

  /* Page hero: particle twinkle */
  .page-hero-particle {
    animation: particleTwinkle 2.8s ease-in-out infinite;
  }

  .page-hero-particle-accent {
    animation: particleTwinkle 3.2s ease-in-out infinite;
  }

  @keyframes particleTwinkle {
    0%,
    100% {
      opacity: 0.4;
    }
    50% {
      opacity: 0.9;
    }
  }

  /* Page hero: drifting waves */
  .page-hero-waves-drift {
    animation: wavesDrift 25s ease-in-out infinite;
  }

  @keyframes wavesDrift {
    0%,
    100% {
      transform: translateX(0);
    }
    50% {
      transform: translateX(-4%);
    }
  }

  /* Page hero: wave shimmer overlay */
  .page-hero-wave-shimmer {
    animation: waveShimmer 6s ease-in-out infinite;
  }

  @keyframes waveShimmer {
    0%,
    100% {
      opacity: 0;
      transform: translateX(-20%) scaleX(0.5);
    }
    50% {
      opacity: 0.5;
      transform: translateX(120%) scaleX(0.6);
    }
  }

  /* Headline shine sweep (for hero) */
  @keyframes shineSweep {
    0% {
      transform: translateX(-100%) skewX(-12deg);
    }
    100% {
      transform: translateX(200%) skewX(-12deg);
    }
  }

  .shine-sweep {
    position: relative;
    overflow: hidden;
  }
  .shine-sweep::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
      105deg,
      transparent 0%,
      rgba(255, 255, 255, 0.12) 45%,
      rgba(255, 255, 255, 0.2) 50%,
      rgba(255, 255, 255, 0.12) 55%,
      transparent 100%
    );
    animation: shineSweep 6s ease-in-out 1.5s 1;
    pointer-events: none;
  }

  /* Curved section divider */
  .section-curve {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 80px;
    fill: currentColor;
    pointer-events: none;
  }

  /* Hero animated pattern — soft pulsing glow */
  .hero-pattern-pulse {
    animation: heroPatternPulse 6s ease-in-out infinite;
  }

  @keyframes heroPatternPulse {
    0%, 100% {
      opacity: 0.6;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.15);
    }
  }

  /* Hero scroll indicator — ripple rings */
  .hero-scroll-ripple {
    animation: heroScrollRipple 3.6s ease-out infinite;
  }

  @keyframes heroScrollRipple {
    0% {
      transform: scale(1);
      opacity: 0.5;
    }
    80% {
      transform: scale(1.45);
      opacity: 0;
    }
    100% {
      transform: scale(1.45);
      opacity: 0;
    }
  }

  /* Hero scroll indicator — orbiting sparkle */
  .hero-scroll-orbit {
    animation: heroScrollOrbit 4s linear infinite;
  }

  @keyframes heroScrollOrbit {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Hero scroll indicator — breathing glow */
  .hero-scroll-glow {
    animation: heroScrollGlow 3s ease-in-out infinite;
  }

  @keyframes heroScrollGlow {
    0%, 100% {
      opacity: 0.5;
      transform: scale(1);
    }
    50% {
      opacity: 0.9;
      transform: scale(1.3);
    }
  }

  /* ── Hero cards ── */

  /* Rainbow border: slow hue rotation for a living, colorful edge */
  .hero-card-border-spin {
    animation: heroCardBorderSpin 6s linear infinite;
  }

  @keyframes heroCardBorderSpin {
    0% {
      filter: hue-rotate(0deg);
    }
    100% {
      filter: hue-rotate(360deg);
    }
  }

  /* Shimmer sweep that glides across the card on hover */
  .hero-card-shimmer {
    animation: heroCardShimmer 2.4s ease-in-out infinite;
  }

  @keyframes heroCardShimmer {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -100% 0;
    }
  }

  /* Shimmer loading effect */
  .shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.4) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s linear infinite;
  }

  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }
}

/* ───────────────── Page Preloader ─────────────────────────────────────── */

.area-loader-container {
  position: fixed;
  padding: 0;
  margin: 0;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  min-height: 200px;
  z-index: 1000;
  background-color: #ffffff;
  visibility: visible;
  opacity: 1;
}

.dark .area-loader-container {
  background-color: #0f172a;
}

/* Navigation overlay — hidden by default, smooth fade-out on hide */
.area-loader-container.area-loader-nav {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

/* Navigation overlay — active: appears instantly (no transition) */
.area-loader-container.area-loader-nav.area-loader-nav-active {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transition: none;
}

.area-loader-container.hide {
  visibility: hidden;
  opacity: 0;
  transition:
    visibility 0.3s linear,
    opacity 0.3s linear;
}

.area-loader {
  margin: 0 auto;
  border-radius: 50% !important;
  width: 6em;
  height: 6em;
  font-size: 10px;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -3em;
  margin-left: -3em;
  text-indent: -9999em;
  border-top: 0.8em solid var(--color-primary);
  border-right: 0.8em solid var(--color-primary);
  border-bottom: 0.8em solid var(--color-primary);
  border-left: 0.8em solid var(--color-secondary);
  transform: translateZ(0);
  animation: mainFullPreloaderAnimation 1.1s infinite linear;
}

@keyframes mainFullPreloaderAnimation {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* ───────────────── Scrollbar Styling ────────────────────────────────────── */

::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-slate-100 dark:bg-slate-800;
}

::-webkit-scrollbar-thumb {
  @apply bg-slate-300 dark:bg-slate-600 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-slate-400 dark:bg-slate-500;
}
